---
roles:
  - role::ipa::server
ipa::server::version: '4.5.0'
ipa::server::domain: 'cmc.lan'
ipa::server::dm_password: 'redhat123'
ipa::server::admin_password: 'redhat123'
ipa::server::shell: '/bin/bash'
ipa::server::dns: true

ipa::server::users:
  'fabian.vanderhoeven':
    domain: 'cmc.lan'
    first: 'Fabian'
    last: 'van der Hoeven'
    email: 'fabian.vanderhoeven@vermont24-7.com'
    memberofgroup:
      'cmc_users':
        ensure: present
      'cmc_admins':
        ensure: absent
ipa::server::usergroups:
  'cmc_users':
    description: 'Users werkzaam bij CMC'
  'cmc_admins':
    description: 'Admin users'

ipa::server::hostgroups:
  'testhostgroup':
    members:
      'ipa01.cmc.lan':
        type: 'host'
        ensure: present

ipa::server::dnszones:
  '10.10.10.in-addr.arpa':
    ttl: 1800
ipa::server::dnsrecords:
  'test.cmc.lan':
    ipaddress: '10.10.10.117'
  'bla.cmc.lan':
#    ensure: absent
#    create_reverse: false
    ipaddress: '10.10.10.119'

ipa::server::dnsforwardzones:
  'windows.cmc.lan':
    forwarder: '10.10.10.116'

ipa::server::sudorules:
  'sudo_cmc_admins':
    description: 'sudo rule for cmc_admins'
    options:
      - '!authenticate'
    usergroups:
      'cmc_admins':
        ensure: present
    hostgroups:
      'ipaservers':
        ensure: present
    cmdgroups:
      'puppet':
        ensure: present
    runasusers:
      'root':
        ensure: present

ipa::server::sudocmdgroups:
  'puppet':
    ensure: present
    commands:
      '/bin/puppet':
        ensure: present
      '/opt/puppetlabs/bin/puppet':
        ensure: present
      '/opt/puppetlabs/puppet/bin/librarian-puppet':
        ensure: present
      '/opt/puppetlabs/puppet/bin/puppet':
        ensure: present
      '/usr/local/bin/puppet':
        ensure: present
    
